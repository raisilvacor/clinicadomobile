{% extends "admin/base.html" %}

{% block title %}Checklist Antifraude de Conclus√£o{% endblock %}

{% block extra_css %}
<style>
    .checklist-container {
        display: grid;
        gap: 2rem;
    }

    .checklist-section {
        background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
        border-radius: 15px;
        padding: 2rem;
        border: 2px solid transparent;
        transition: all 0.3s ease;
    }

    .checklist-section h3 {
        color: #ff8c00;
        margin-bottom: 1.5rem;
        font-size: 1.5rem;
    }

    .repair-info-box {
        background: #0d0d0d;
        padding: 1.5rem;
        border-radius: 10px;
        margin-bottom: 2rem;
        border: 1px solid #333333;
    }

    .repair-info-box h4 {
        color: #ff8c00;
        margin-bottom: 1rem;
    }

    .test-item {
        background: #0d0d0d;
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        border: 1px solid #333333;
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .test-item input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    .test-item label {
        color: #ffffff;
        cursor: pointer;
        flex: 1;
    }

    .photo-upload-area {
        border: 2px dashed #ff8c00;
        border-radius: 10px;
        padding: 2rem;
        text-align: center;
        background: rgba(255, 140, 0, 0.05);
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 1rem;
    }

    .photo-upload-area:hover {
        background: rgba(255, 140, 0, 0.1);
    }

</style>
{% endblock %}

{% block content %}
<div class="admin-card">
    <h2>‚úÖ Checklist Antifraude de Conclus√£o</h2>
    <p>Realize o teste final antes de emitir a Ordem de Retirada.</p>

    <div class="repair-info-box">
        <h4>Informa√ß√µes do Reparo</h4>
        <p><strong>ID:</strong> {{ repair.id }}</p>
        <p><strong>Dispositivo:</strong> {{ repair.device_name or 'N/A' }}</p>
        <p><strong>Cliente:</strong> {{ repair.customer_name or 'N/A' }}</p>
    </div>

    <form method="POST" enctype="multipart/form-data">
        <input type="hidden" name="checklist_type" value="conclusao">
        <input type="hidden" name="repair_id" value="{{ repair.id }}">

        <!-- Testes Finais -->
        <div class="checklist-section">
            <h3>üß™ Testes Finais (Obrigat√≥rios)</h3>
            
            <div class="test-item">
                <input type="checkbox" id="test_after_power" name="test_after_power">
                <label for="test_after_power">Bot√£o Power</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_volume" name="test_after_volume">
                <label for="test_after_volume">Bot√µes de Volume</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_silent" name="test_after_silent">
                <label for="test_after_silent">Bot√£o Silenciar</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_home" name="test_after_home">
                <label for="test_after_home">Bot√£o Home</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_other_buttons" name="test_after_other_buttons">
                <label for="test_after_other_buttons">Outros Bot√µes</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_display_touch" name="test_after_display_touch">
                <label for="test_after_display_touch">Display e Touch</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_signal" name="test_after_signal">
                <label for="test_after_signal">Sinal da Operadora</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_proximity" name="test_after_proximity">
                <label for="test_after_proximity">Sensor de Proximidade</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_speaker" name="test_after_speaker">
                <label for="test_after_speaker">Auto-Falante</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_earpiece" name="test_after_earpiece">
                <label for="test_after_earpiece">Auricular</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_microphone" name="test_after_microphone">
                <label for="test_after_microphone">Microfone</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_touch_id" name="test_after_touch_id">
                <label for="test_after_touch_id">Touch ID</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_vibration" name="test_after_vibration">
                <label for="test_after_vibration">Vibra</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_front_camera" name="test_after_front_camera">
                <label for="test_after_front_camera">C√¢mera Frontal</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_back_camera" name="test_after_back_camera">
                <label for="test_after_back_camera">C√¢mera Traseira</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_flash" name="test_after_flash">
                <label for="test_after_flash">Flash</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_face_id" name="test_after_face_id">
                <label for="test_after_face_id">Face ID</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_wifi" name="test_after_wifi">
                <label for="test_after_wifi">Wi-FI</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_bluetooth" name="test_after_bluetooth">
                <label for="test_after_bluetooth">Bluetooth</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_charging" name="test_after_charging">
                <label for="test_after_charging">Carregamento</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_headphone" name="test_after_headphone">
                <label for="test_after_headphone">Fone de Ouvido</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_biometric" name="test_after_biometric">
                <label for="test_after_biometric">Sensor Biom√©trico</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_nfc" name="test_after_nfc">
                <label for="test_after_nfc">NFC</label>
            </div>
            <div class="test-item">
                <input type="checkbox" id="test_after_wireless_charging" name="test_after_wireless_charging">
                <label for="test_after_wireless_charging">Carga por Indu√ß√£o</label>
            </div>
        </div>

        <!-- Fotos (Opcional) -->
        <div class="checklist-section">
            <h3>üì∏ Fotos (Opcional)</h3>
            
            <div>
                <label style="color: #ffffff; display: block; margin-bottom: 0.5rem;">Foto do IMEI</label>
                <input type="file" name="imei_photo" accept="image/*" class="form-control">
            </div>
            <div style="margin-top: 1rem;">
                <label style="color: #ffffff; display: block; margin-bottom: 0.5rem;">Foto da Placa</label>
                <input type="file" name="placa_photo" accept="image/*" class="form-control">
            </div>
            <div style="margin-top: 1rem;">
                <label style="color: #ffffff; display: block; margin-bottom: 0.5rem;">Foto dos Conectores</label>
                <input type="file" name="conectores_photo" accept="image/*" class="form-control">
            </div>
        </div>

        <div style="margin-top: 2rem; display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-primary">‚úÖ Salvar Checklist de Conclus√£o</button>
            <a href="{{ url_for('admin_repairs') }}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

{% endblock %}

